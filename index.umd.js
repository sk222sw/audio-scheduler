!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.audioScheduler={})}(this,function(t){var i;!function(t){t[t.Infinite=0]="Infinite",t[t.Finite=1]="Finite"}(i||(i={}));var e=function(){function t(t){this.initialIntervals=[],this.intervalList=[],this.mode=t.infinite?i.Infinite:i.Finite,this.initialIntervals=t.intervalLengths,this.scheduleAheadTime=t.schedulAheadTime||.1,this.intervalTime=t.intervalTime||50,this.tempo=t.tempo,this.context=t.context||new AudioContext}return t.prototype._init=function(){this.msTempo=6e4/this.tempo,this.intervalList=this.initialIntervals},t.prototype._intervalLengthInMs=function(){return this.msTempo/1e3},t.prototype.setTempo=function(t){this.tempo=t,this.msTempo=6e4/this.tempo},t.prototype._scheduler=function(t,e){if((n=this.intervalList)[n.length-1]){var n,s=this._calculateNext(function(t){return t[0]}(this.intervalList));s<t+this.scheduleAheadTime&&this._runCallback(s,e)}else this.mode===i.Finite?this.stopInterval(this.setIntervalReference):this.intervalList=this.initialIntervals},t.prototype._calculateNext=function(t){return(this.lastIntervalStartedAt||0)+t*this._intervalLengthInMs()},t.prototype._runCallback=function(t,i){this.intervalList=this.intervalList.slice(1,this.intervalList.length),this.lastIntervalStartedAt=t,i(t)},t.prototype.startInterval=function(t){var i=this;this._init(),this._runCallback(this.context.currentTime,t);var e=setInterval(function(e){return i._scheduler(i.context.currentTime,t)},this.intervalTime);return this.setIntervalReference=e,e},t.prototype.stopInterval=function(t){clearInterval(t)},t.prototype.updateIntervals=function(t){this.intervalList=t,this.initialIntervals=t},t.prototype.push=function(t){this.intervalList=this.intervalList.concat([t]),this.initialIntervals=this.initialIntervals.concat([t])},t.prototype.shift=function(){var t=this.intervalList,i=t.slice(1),e=this.initialIntervals,n=e.slice(1);this.intervalList=i,this.initialIntervals=n},t.prototype.pop=function(){var t=this.intervalList.slice();t.pop(),this.intervalList=t;var i=this.initialIntervals.slice();i.pop(),this.initialIntervals=i},t}();t.AudioScheduler=e});
//# sourceMappingURL=index.umd.js.map
